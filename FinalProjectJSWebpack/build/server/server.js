(()=>{var e={203:e=>{e.exports={add:(e,t)=>(e.contents.push(t.body),["Добавление товара: "+t.body.product_name,JSON.stringify(e,null,4)]),change:(e,t)=>{const s=e.contents.find((e=>e.id_product===+t.params.id));return s.count+=t.body.count,["Изменение количества товара: "+s.product_name,JSON.stringify(e,null,4)]},del:(e,t)=>{const s=e.contents.find((e=>e.id_product===+t.params.id));return e.contents.splice(e.contents.indexOf(s),1),["Удаление товара: "+s.product_name,JSON.stringify(e,null,4)]}}},794:(e,t,s)=>{const r=s(860),n=s(147),d=s(757).handler,i=r.Router();i.get("/",((e,t)=>{n.readFile("./build/server/db/userCart.json","utf-8",((e,s)=>{e?t.sendStatus(404,JSON.stringify({result:0,text:e})):t.send(s)}))})),i.post("/",((e,t)=>{d(e,t,"add","./build/server/db/userCart.json")})),i.put("/:id",((e,t)=>{d(e,t,"change","./build/server/db/userCart.json")})),i.delete("/:id",((e,t)=>{d(e,t,"del","./build/server/db/userCart.json")})),e.exports=i},757:(e,t,s)=>{const r=s(147),n=s(203),d=s(245),i={add:n.add,change:n.change,del:n.del};e.exports={handler:(e,t,s,n)=>{r.readFile(n,"utf-8",((o,u)=>{if(o)t.sendStatus(404,JSON.stringify({result:0,text:o}));else{const o=i[s](JSON.parse(u),e)[1];let l=i[s](JSON.parse(u),e)[0]+" "+d().format("LTS");console.log(l),r.readFile("./build/server/db/stats.json","utf-8",((e,t)=>{if(e)console.log(e);else{const e=JSON.parse(t);e.push({log:l}),r.writeFile("./build/server/db/stats.json",JSON.stringify(e),(e=>{}))}})),r.writeFile(n,o,(e=>{e?t.send('{"result": 0}'):t.send('{"result": 1}')}))}}))},handlerId:(e,t,s)=>{r.readFile(s,"utf-8",((n,d)=>{if(n)t.sendStatus(404,JSON.stringify({result:0,text:n}));else{const n=((e,t)=>(e.contents.push(t.body),JSON.stringify(e,null)))(JSON.parse(d),e);r.writeFile(s,n,(e=>{e?t.send('{"result": 0}'):t.send('{"result": 1}')}))}}))}}},895:(e,t,s)=>{const r=s(860),n=s(147),d=s(757).handlerId,i=r.Router();i.get("/",((e,t)=>{n.readFile("./build/server/db/openPage.json","utf-8",((e,s)=>{e?t.sendStatus(404,JSON.stringify({result:0,text:e})):t.send(s)}))})),i.put("/",((e,t)=>{d(e,t,"./build/server/db/openPage.json")})),e.exports=i},860:e=>{"use strict";e.exports=require("express")},245:e=>{"use strict";e.exports=require("moment")},147:e=>{"use strict";e.exports=require("fs")}},t={};function s(r){var n=t[r];if(void 0!==n)return n.exports;var d=t[r]={exports:{}};return e[r](d,d.exports,s),d.exports}(()=>{const e=s(860),t=s(147),r=s(794),n=s(895),d=e();d.use(e.json()),d.use("/",e.static("./build")),d.use("/api/cart",r),d.use("/api/open",n),d.get("/api/products",((e,s)=>{t.readFile("build/server/db/catalogData.json","utf-8",((e,t)=>{e?s.send(JSON.stringify({result:0,text:e})):s.send(t)}))})),d.listen(8080,(()=>{console.log("Listening 8080 port")}))})()})();